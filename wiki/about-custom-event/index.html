<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width"><title>Atobaum Wiki</title><link rel=stylesheet href=https://atobaum.github.io/css/index.css><link rel=stylesheet href=https://atobaum.github.io/css/reset.css><link rel=apple-touch-icon sizes=180x180 href=https://atobaum.github.io/fav/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://atobaum.github.io/fav/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://atobaum.github.io/fav/favicon-16x16.png><link rel=manifest href=https://atobaum.github.io/fav/site.webmanifest></head><body><div id=wrap><header id=gheader><div class="flex flex-jsb"><div id=logo><a href=https://atobaum.github.io>Atobaum Wiki</a></div><nav class=right0><ul id=gnb><li><a href=/about>about</a></li><li><a href=/>all</a></li><li><a href=/random>random</a></li><li><a href=/tags>tags</a></li></ul></nav></div><div id=search class=flex-end>searchbar</div></header><div id=main><h1 class=content-title>Javascript에서 이벤트를 만들어보자.</h1><h3 class=content-summary>Let&rsquo;s create and emit custom event in javascript</h3><div><div><ul class=tag-list><li class=tag><a href=https://atobaum.github.io/tags/javascript>#Javascript</a></li><li class=tag><a href=https://atobaum.github.io/tags/event>#Event</a></li></ul></div><div class=content-meta><ul><li>작성: 2020-07-23<li></li>수정: 2020-07-25</li></ul>2 분 걸려요.</div><div><aside id=toc-wrapper><nav id=TableOfContents><ul><li><ul><li><a href=#개요>개요</a></li><li><a href=#이벤트-만들기>이벤트 만들기</a></li><li><a href=#이벤트-발생시키기>이벤트 발생시키기</a></li><li><a href=#이벤트에-추가-정보-담아서-보내기>이벤트에 추가 정보 담아서 보내기</a></li><li><a href=#어디에-쓸까>어디에 쓸까?</a><ul><li><a href=#예제>예제</a></li></ul></li></ul></li></ul></nav></aside><article class=content-article><h2 id=개요>개요</h2><p>자바스크립트는 이벤트를 많이 이용한다. 이 글에서는 커스텀 이벤트를 만들어보고 이를 이용해 삶을 편하게 만들어보자.</p><h2 id=이벤트-만들기>이벤트 만들기</h2><div class=highlight><pre style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#859900>const</span> <span style=color:#268bd2>event</span> = <span style=color:#859900>new</span> <span style=color:#268bd2>Event</span>(<span style=color:#2aa198>&#34;testevent1&#34;</span>, { <span style=color:#268bd2>bubbles</span>: <span style=color:#859900;font-weight:700>true</span> });
</code></pre></div><p>첫번째 인자는 이벤트의 이름이고 두번째 인자 이벤트의 옵션이다. 옵션은 생략할 수 있다.
기본값은 버블링이 안되기 때문에 <code>bubbles: true</code>를 주어야 버블링이 일어난다. <code>bubbles</code> 외에 <code>cancelable</code>과 <code>composed</code>도 올 수 있다.</p><p>자세한 사항은 <a href=https://developer.mozilla.org/ko/docs/Web/API/Event/Event>MDN</a>을 참고하자.</p><h2 id=이벤트-발생시키기>이벤트 발생시키기</h2><p>DOM 객체의 dispatchEvent를 이용해 다음과 같이 이벤트를 발생시킬 수 있다.</p><div class=highlight><pre style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#cb4b16>document</span>.<span style=color:#268bd2>body</span>.<span style=color:#268bd2>addEventListener</span>(<span style=color:#2aa198>&#34;testevent1&#34;</span> (<span style=color:#268bd2>evt</span>)=&gt;{<span style=color:#268bd2>alert</span>(<span style=color:#2aa198>&#34;testevent1이 발생되었어요.&#34;</span>)})
<span style=color:#cb4b16>document</span>.<span style=color:#268bd2>body</span>.<span style=color:#268bd2>dispatchEvent</span>(<span style=color:#268bd2>event</span>);
</code></pre></div><h2 id=이벤트에-추가-정보-담아서-보내기>이벤트에 추가 정보 담아서 보내기</h2><p>CustomEvent를 이용하면 이벤트에 사용자가 추가 정보를 담아서 만들수도 있다. 자세한 내용은 <a href=https://developer.mozilla.org/ko/docs/Web/API/CustomEvent/CustomEvent>MDN CustomEvent()</a>을 참고하자.</p><div class=highlight><pre style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#859900>const</span> <span style=color:#268bd2>customEvent</span> = <span style=color:#859900>new</span> <span style=color:#268bd2>CustomEvent</span>(<span style=color:#2aa198>&#34;customevent&#34;</span>, {
  <span style=color:#268bd2>bubbles</span>: <span style=color:#859900;font-weight:700>true</span>,
  <span style=color:#268bd2>detail</span>: { <span style=color:#268bd2>id</span>: <span style=color:#2aa198;font-weight:700>1</span> },
});
</code></pre></div><p>그리고 핸들러에서 다음과 같이 데이터를 얻을 수 있다:</p><div class=highlight><pre style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#cb4b16>document</span>.<span style=color:#268bd2>body</span>.<span style=color:#268bd2>dispatchEvent</span>(<span style=color:#268bd2>customEvent</span>);
<span style=color:#cb4b16>document</span>.<span style=color:#268bd2>body</span>.<span style=color:#268bd2>addEventListener</span>(<span style=color:#2aa198>&#34;customevent&#34;</span>, (<span style=color:#268bd2>evt</span>) =&gt; {
  <span style=color:#268bd2>alert</span>(<span style=color:#268bd2>evt</span>.<span style=color:#268bd2>detail</span>.<span style=color:#268bd2>id</span>); <span style=color:#93a1a1;font-style:italic>//1
</span><span style=color:#93a1a1;font-style:italic></span>});
</code></pre></div><h2 id=어디에-쓸까>어디에 쓸까?</h2><p><a href=https://github.com/woowa-techcamp-2020/todo-10>우아한테크코스 투두 프로젝트</a>에서 사용자가 한 일을 옆에 표시해야하는 일이 있었다. 아이템을 만들고 삭제하거나 옮길 때마다 로그를 추가해야하는 데 각 행동을 처리하는 코드는 여러군데에 있었다. 이 때 각각의 장소에서 <code>log</code> 이벤트를 만들어서 발생시키고 상위 DOM에서 이벤트 핸들러를 등록시켜 모든 로그 이벤트를 처리했더니 상호 의존성이 줄어서 관리하기 편했다.</p><p><img src=https://user-images.githubusercontent.com/8086328/88454260-360f7900-cea9-11ea-82c8-0de21112cd14.png alt=스크린샷></p><h3 id=예제>예제</h3><p class=codepen data-height=512 data-theme-id=dark data-default-tab=js,result data-user=atobaum data-slug-hash=mdVoMxW style="height:512px;box-sizing:border-box;display:flex;align-items:center;justify-content:center;border:2px solid;margin:1em 0;padding:1em" data-pen-title=CustomEventExample><span>See the Pen <a href=https://codepen.io/atobaum/pen/mdVoMxW>CustomEventExample</a> by atobaum (<a href=https://codepen.io/atobaum>@atobaum</a>)
on <a href=https://codepen.io>CodePen</a>.</span></p><script async src=https://static.codepen.io/assets/embed/ei.js></script></article></div></div></body></html>