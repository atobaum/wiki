<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width"><title>Atobaum Wiki</title><link rel=stylesheet href=https://atobaum.github.io/css/index.css><link rel=stylesheet href=https://atobaum.github.io/css/reset.css><link rel=apple-touch-icon sizes=180x180 href=https://atobaum.github.io/fav/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://atobaum.github.io/fav/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://atobaum.github.io/fav/favicon-16x16.png><link rel=manifest href=https://atobaum.github.io/fav/site.webmanifest><script async src="https://www.googletagmanager.com/gtag/js?id=UA-177439615-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-177439615-1');</script></head><body><div id=wrap><header id=gheader><div class="flex flex-jsb"><div id=logo><a href=https://atobaum.github.io>Atobaum Wiki</a></div><nav class=right0><ul id=gnb><li><a href=/about>about</a></li><li><a href=/>all</a></li><li><a href=/random>random</a></li><li><a href=/tags>tags</a></li></ul></nav></div><div id=search class=flex-end>searchbar</div></header><div id=main><h1 class=content-title>Github에서 GPG를 적용해보자</h1><h3 class=content-summary>Github에서 GPG를 적용해보자</h3><div><div><ul class=tag-list><li class=tag><a href=https://atobaum.github.io/tags/gpg>#GPG</a></li><li class=tag><a href=https://atobaum.github.io/tags/git>#Git</a></li><li class=tag><a href=https://atobaum.github.io/tags/github>#Github</a></li></ul></div><div class=content-meta><ul><li>작성: 2020-10-25<li></li>수정: 2020-10-25</li></ul>2 분 걸려요.</div><div><aside id=toc-wrapper><nav id=TableOfContents><ul><li><ul><li><a href=#gpg-키-만들기>GPG 키 만들기</a><ul><li><a href=#gnupg-설치>GnuPG 설치</a></li><li><a href=#gpg-key-생성>GPG key 생성</a></li><li><a href=#확인>확인</a></li></ul></li><li><a href=#git에-gpg-key-등록>Git에 GPG key 등록</a></li><li><a href=#githuib에-gpg-key-등록>Githuib에 GPG key 등록</a></li><li><a href=#referende>Referende</a></li><li><a href=#더-보기>더 보기</a></li></ul></li></ul></nav></aside><article class=content-article><p>Git에서는 commit이나 tag를 만들 때 gpg 서명을 할 수 있다. 이를 적용해보자.</p><h2 id=gpg-키-만들기>GPG 키 만들기</h2><h3 id=gnupg-설치>GnuPG 설치</h3><p>Mac에서 brew를 이용해 GnuPG를 설치하자. 이 글에서 사용하는 버전은 <code>2.2.23</code>이다.</p><div class=highlight><pre style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>brew install gpg
</code></pre></div><p>맥이 아닌 다른 운영체제는 지못미&mldr;</p><h3 id=gpg-key-생성>GPG key 생성</h3><p>이제 gpg키를 만들어보자:</p><div class=highlight><pre style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>gpg --full-gen-key
</code></pre></div><p>만약 간단하게 만들고 싶으면 <code>--gen-key</code>를 사용하자. name과 email만 입력하면 된다.</p><ol><li>맘에 드는 키 종류를 고르자. 여기서는 기본값인 <code>RAS and RSA</code>를 선택한다.</li><li>key size를 선택하자. 1024부터 4096까지 선택할 수 있는데 요즘은 컴퓨터가 좋아서 4096으로 해도 좋다. Github에서는 4096을 권장한다고 한다.</li><li>마음에 드는 키 유효기간을 설정하자.</li><li>마지막으로 name과 email을 설정하면 키가 만들어진다.</li></ol><h3 id=확인>확인</h3><p>다음 명령어를 입력하면 키가 잘 만들어졌는지 확인할 수 있다:</p><div class=highlight><pre style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ gpg --list-secret-keys --keyid-format LONG
/Users/test/.gnupg/pubring.kbx
---------------------------------
pub   rsa4096/ABCD1235 2020-10-25 [SC] [expires: 2021-10-25]
      316D443A0E92BB0A0CFB8C64581C8953EEFAAE4
uid                 [ultimate] <span style=color:#cb4b16>test</span> &lt;test@test.com&gt;
sub   rsa4096/QWER3455 2020-10-25 [E] [expires: 2021-10-25]
</code></pre></div><p>위에서 <code>rsa4096/ABCD1235</code>의 <code>ABCD1235</code>가 key id이다. 이 key id를 잘 기억하자.</p><h2 id=git에-gpg-key-등록>Git에 GPG key 등록</h2><p>git에서 commit이나 tag를 만들 때 <code>-S</code> 옵션을 주면 gpg 서명을 할 수 있다.</p><div class=highlight><pre style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>git config --global user.signkey ABCD1234
git config --global commit.gpgsign <span style=color:#cb4b16>true</span>  <span style=color:#93a1a1;font-style:italic># -S 옵션을 주지 않아도 서명한다.</span>
</code></pre></div><h2 id=githuib에-gpg-key-등록>Githuib에 GPG key 등록</h2><p>마지막으로 gpg public key를 github에 등록해야한다.
다음 명령어를 입력하면 GPG key가 출력된다. 맥에서는 뒤에 <code>| pbcopy</code>를 추가하면 바로 클립보드에 복사할 수 있다.</p><div class=highlight><pre style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ gpg --armor --export ABCD1235
</code></pre></div><p>복사한 키를 github setting - SSH and GPG keys에서 설정할 수 있다. 이 때 앞뒤의 <code>-----BEGIN PGP PUBLIC KEY BLOCK-----</code>, <code>-----END PGP PUBLIC KEY BLOCK-----</code>까지 입력해야한다.</p><p>이제 commit을 하고 push를 해보면 commit 옆에 Verified가 뜨는 것을 볼 수 있다.</p><h2 id=referende>Referende</h2><ul><li><a href=https://johngrib.github.io/wiki/gpg/>기계인간 위키 - GnuPG 사용법</a></li><li><a href=https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/generating-a-new-gpg-key>Github docs</a></li></ul><h2 id=더-보기>더 보기</h2><ul><li><a href=/wiki/rsa>RSA</a></li></ul></article></div></div></body></html>